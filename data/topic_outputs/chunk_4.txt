of time spent on memory stalls will take up an increasing fraction of the 
execution time
• Amdahl’s law

Cache Performance Example Revisit
• Suppose we speed up the system by reducing its CPI from 2 to 1 without 
changing the clock rate.  
• Actual CPI = 1 + 3.44 = 4.44
• Ideal CPU is 4.44/1 = 4.44 times faster
• Amount of time spent on memory stalls increases:
• Before: 
3.44/5.44 = 63%
• Now:
3.44/4.44 = 77%

Performance Considerations
• Increasing clock rate without changing the memory system also increases the 
performance lost due to cache misses. 
• Memory stalls account for more CPU cycles

Performance Considerations
• Hit Access Time
• If the hit time increases, the total time to access a word from the memory system will 
increase.
• Affect by:
• Cache size
• Number of pipeline stages
• Cache organization

Multilevel Caches
• Primary cache attached to CPU
• Small, but fast
• Level-2 cache services misses from primary cache
• Larger, slower, but still faster than main memory
• Main memory services L-2 cache misses
• Some high-end systems include L-3 cache

Multilevel Cache Example
• Suppose we have a processor with a base CPI of 1.0, assuming all references 
hit in the primary cache, and a clock rate of 5 GHz. Assume a main memory 
access time of 100 ns, including all the miss handling. Suppose the miss rate 
per instruction at the primary cache is 2%. 
• How much faster will the processor be if we add a secondary cache that has a 
5 ns access time for either a hit or a miss and is large enough to reduce the 
miss rate to main memory to 0.5%?

Multilevel Cache Example
• Given
• CPU base CPI = 1
• CPU clock rate = 5 GHz
• Miss rate/instruction = 2%
• Main memory access time = 100ns

Multilevel Cache Example
• Given
• CPU base CPI = 1
• CPU clock rate = 5 GHz
• Miss rate/instruction = 2%
• Main memory access time = 100ns
• With just primary cache
• Miss penalty = 100ns/0.2ns = 500 cycles
• Effective CPI = 1 + 0.02 × 500 = 11

Multilevel Cache Example
• Now add L-2 cache
• Access time = 5ns
• Global miss rate to main memory = 0.5%
• Primary miss with L-2 hit
• Penalty = 5ns/0.2ns = 25 cycles
• Primary miss with L-2 miss
• Extra penalty = 500 cycles
• CPI = 1 + 0.02 × 25 + 0.005 × 500 =4
• Performance ratio = 11/4 = 2.8

Multilevel Cache Considerations
• Primary cache
• Focus on minimal hit time
• L-2 cache
• Focus on low miss rate to avoid main memory access
• Hit time has less overall impact
• Results
• L-1 cache usually smaller than a single cache
• L-1 block size smaller than L-2 block size

Summary
• Cost/Performance tradeoff in memory technologies
• Create an illusion of large amounts of fast memory with a hierarchy
• Uses caches close to the processor
• Cache Details
• Organization: direct mapped, set associative, fully associative
• Write policy: write-through vs. write-back
• Replacement policy: direct, LRU, random

Summary
• Tradeoffs to Improve Cache Performance:
• Use better technology
• Use faster RAMs
• Cost and availability are limitations
• Decrease Hit Time
• Make cache smaller, but miss rate 